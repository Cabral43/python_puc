name: continuousdelivery.yml
on:
  push:
    branches:
      - main
jobs:
  delivery:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository code
        uses: actions/checkout@v4

      - name: simulando continuous delivery
        uses: actions/upload-artifact@v4
        with:
          name: projetozipado.zip
          path:
            main.py

  deploy:
    runs-on: ubuntu-latest
    needs: delivery
    steps:
        - uses: actions/download-artifact@v4
          with:
            name: projetozipado.zip

        - name: Display structure of downloaded artifact
          run: ls -R

  discord:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run Discord Webhook
        uses: johnnyhuy/actions-discord-git-webhook@main
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
